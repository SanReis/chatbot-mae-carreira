# -*- coding: utf-8 -*-
"""Projeto - ChatBot

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1yqvK_eghFheaXxdXKFdc3whwCfqRrZHQ
"""

import google.generativeai as genai
import os
!pip install google-generativeai -q

try:
    API_KEY = os.environ['GOOGLE_API_KEY']
    genai.configure(api_key=API_KEY)
    print("Chave API do Google configurada com sucesso usando Secrets.")
except KeyError:
    print("ERRO: Chave API do Google nÃ£o encontrada nos Secrets do Colab ('GOOGLE_API_KEY').")
    print("Por favor, configure sua chave API no painel 'Secrets' (Ã­cone ğŸ”‘) antes de rodar o chatbot.")
    sair = True
except Exception as e:
    print(f"ERRO inesperado ao configurar a API: {e}")
    sair = True

if 'sair' in locals() and sair:
    exit()

try:
    model = genai.GenerativeModel('gemini-2.5-flash-latest')
    print("Modelo Gemini 2.5 Flash carregado com sucesso.")
except Exception as e:
    print(f"ERRO ao carregar o modelo Gemini 2.5 Flash: {e}")
    print("Verifique se sua Chave API estÃ¡ correta e ativa e se o modelo estÃ¡ disponÃ­vel para vocÃª.")
    exit()

current_phase = 'welcome'
sair = False
user_focus = None
chosen_scenario = None
user_scenario_description = {}
identified_skills = set()

welcome_message = """
OlÃ¡! Que bom te ver por aqui. Sou sua Navegadora de Carreiras e Maternidade.
Meu objetivo Ã© te ajudar a descobrir, reconhecer e comunicar o valor imenso das
habilidades que vocÃª desenvolveu cuidando dos seus filhos.
A maternidade nos ensina muito sobre gerenciar o caos, negociar sem parar e
liderar pelo exemplo! Vamos juntas explorar como tudo isso se aplica Ã  sua carreira?
"""

focus_options = """
Para comeÃ§ar, pensando na sua jornada de carreira e maternidade, o que vocÃª mais gostaria de focar hoje?
1. Identificar habilidades para incluir no seu currÃ­culo/LinkedIn.
2. Preparar uma resposta para uma entrevista sobre sua pausa ou conciliaÃ§Ã£o.
3. Apenas reconhecer e valorizar o que vocÃª aprendeu.
4. Outro objetivo.
Por favor, digite o nÃºmero da sua escolha (ou 'sair' para encerrar):
"""

scenario_options = """
Vamos pensar em situaÃ§Ãµes desafiadoras ou complexas que vocÃª enfrentou (ou enfrenta) no dia a dia com seus filhos.
Escolha uma Ã¡rea que te pareÃ§a interessante para explorar agora:
1. Gerenciar mÃºltiplas tarefas ou pessoas ao mesmo tempo.
2. Resolver um conflito ou uma crise inesperada.
3. Planejar e organizar algo com muitos detalhes (uma viagem, uma festa, uma rotina).
4. Ensinar ou explicar algo complexo de forma simples e paciente.
5. Adaptar-se rapidamente a uma mudanÃ§a de planos ou emergÃªncia.
6. Motivar alguÃ©m (seu filho, parceiro/a, etc.) a fazer algo que nÃ£o queria.
7. Outra situaÃ§Ã£o que vocÃª queira descrever.

Por favor, digite o nÃºmero da sua escolha (ou 'sair' para voltar ao foco):
"""

scenario_details = {
    '1': {
        'text': 'Gerenciar mÃºltiplas tarefas ou pessoas ao mesmo tempo',
        'questions': [
            "Descreva a situaÃ§Ã£o: Quais eram as diferentes 'tarefas' ou 'pessoas' que vocÃª estava conciliando? O que era o mais difÃ­cil?",
            "Como vocÃª decidiu o que fazer primeiro? Que 'ferramentas' ou 'estratÃ©gias' vocÃª usou para lidar com tudo ao mesmo tempo? (Ex: fez listas, pediu ajuda, priorizou, aceitou imperfeiÃ§Ã£o?)",
            "Qual foi o 'resultado' dessa situaÃ§Ã£o? O que vocÃª conseguiu completar ou alcanÃ§ar? O que vocÃª aprendeu sobre si mesma nesse processo?"
        ]
    },
     '2': {
        'text': 'Resolver um conflito ou uma crise inesperada',
        'questions': [
            "Descreva a situaÃ§Ã£o do conflito/crise: Quem estava envolvido? Qual era o motivo principal da disputa ou o que causou a crise?",
            "Como vocÃª abordou a situaÃ§Ã£o? Que perguntas vocÃª fez para entender o lado de cada um ou a raiz do problema? O que vocÃª fez ou disse?",
            "Que soluÃ§Ã£o vocÃªs (ou vocÃª) encontraram? Qual foi o resultado da sua intervenÃ§Ã£o? O que vocÃª aprendeu sobre si nesse momento?"
        ]
    },
     '3': {
        'text': 'Planejar e organizar algo com muitos detalhes',
        'questions': [
            "Descreva o que vocÃª precisou planejar/organizar (ex: viagem, festa, rotina, mudanÃ§a). Quais eram os principais desafios ou detalhes a considerar?",
            "Como vocÃª comeÃ§ou a planejar? Que passos vocÃª seguiu? Que ferramentas (mentais ou fÃ­sicas) usou para organizar (ex: planilhas, notas, aplicativos)?",
            "Qual foi o resultado desse planejamento/organizaÃ§Ã£o? Tudo saiu como esperado? O que vocÃª faria diferente? Que habilidade de planejamento/organizaÃ§Ã£o vocÃª sente que usou mais?"
        ]
    },
    '4': {
        'text': 'Ensinar ou explicar algo complexo de forma simples e paciente',
        'questions': [
            "O que vocÃª precisou ensinar ou explicar? Para quem? Qual era a principal dificuldade para a outra pessoa entender?",
            "Como vocÃª abordou o ensino/explicaÃ§Ã£o? Que linguagem usou? Deu exemplos prÃ¡ticos? Teve que repetir ou tentar de formas diferentes? Como lidou com a frustraÃ§Ã£o ou falta de interesse da outra pessoa?",
            "A outra pessoa conseguiu entender ou aprender? Qual foi o resultado? O que vocÃª aprendeu sobre comunicaÃ§Ã£o ou paciÃªncia nesse processo?"
        ]
    },
     '5': {
        'text': 'Adaptar-se rapidamente a uma mudanÃ§a de planos ou emergÃªncia',
        'questions': [
            "Descreva a mudanÃ§a de planos ou emergÃªncia que aconteceu inesperadamente. Qual era o plano original ou a situaÃ§Ã£o 'normal'?",
            "Como vocÃª reagiu inicialmente? Que passos vocÃª tomou para se adaptar ou lidar com a emergÃªncia? Teve que pensar rÃ¡pido?",
            "Qual foi o desfecho da situaÃ§Ã£o? VocÃª conseguiu resolver o problema ou ajustar os planos com sucesso? O que essa experiÃªncia te ensinou sobre sua capacidade de adaptaÃ§Ã£o ou resoluÃ§Ã£o rÃ¡pida?"
        ]
    },
     '6': {
        'text': 'Motivar alguÃ©m (seu filho, parceiro/a, etc.) a fazer algo que nÃ£o queria',
        'questions': [
            "Quem vocÃª precisou motivar e a fazer o quÃª? Por que essa pessoa estava relutante?",
            "Que abordagens vocÃª utilizou para convencer ou incentivar? Usou conversa, negociaÃ§Ã£o, recompensa, explicou o 'porquÃª'? Como lidou com a resistÃªncia inicial?",
            "A pessoa acabou fazendo o que era necessÃ¡rio? Qual foi o resultado da sua tentativa de motivaÃ§Ã£o? O que vocÃª aprendeu sobre persuasÃ£o ou influÃªncia nesse processo?"
        ]
    },
     '7': {
         'text': 'Outra situaÃ§Ã£o que vocÃª queira descrever',
         'questions': [
             "Por favor, descreva brevemente a situaÃ§Ã£o da maternidade que vocÃª quer explorar.",
             "Agora, pense em como vocÃª agiu nessa situaÃ§Ã£o. Quais foram seus principais passos, decisÃµes ou desafios?",
             "E qual foi o resultado? O que vocÃª conseguiu alcanÃ§ar e o que essa experiÃªncia te ensinou?"
         ]
     }
}

skill_templates = {
    'OrganizaÃ§Ã£o': "Demonstro forte capacidade de **{skill_name}** e coordenaÃ§Ã£o, gerenciando [descrever brevemente o cenÃ¡rio/resultado].",
    'Planejamento EstratÃ©gico': "Habilidade comprovada em **{skill_name}** para antecipar necessidades e planejar [descrever brevemente o cenÃ¡rio/resultado].",
    'GestÃ£o de Tarefas': "Eficaz em **{skill_name}**, organizando e acompanhando mÃºltiplas responsabilidades para [descrever brevemente o cenÃ¡rio/resultado].",
    'PriorizaÃ§Ã£o': "ExperiÃªncia em **{skill_name}**, focando recursos e esforÃ§os nas atividades mais crÃ­ticas em [descrever brevemente o cenÃ¡rio/resultado].",
    'ResoluÃ§Ã£o de Conflitos': "Proficiente em **{skill_name}** e mediaÃ§Ã£o, facilitando acordos em [descrever brevemente o cenÃ¡rio/resultado].",
    'NegociaÃ§Ã£o': "Forte poder de **{skill_name}**, alcanÃ§ando resultados mutuamente benÃ©ficos em [descrever brevemente o cenÃ¡rio/resultado].",
    'MediaÃ§Ã£o': "Habilidade em **{skill_name}**, facilitando a comunicaÃ§Ã£o e o entendimento entre partes em [descrever brevemente o cenÃ¡rio/resultado].",
    'ResiliÃªncia': "Alta **{skill_name}** e capacidade de manter a calma e o foco sob pressÃ£o em [descrever brevemente o cenÃ¡rio/resultado].",
    'Gerenciamento de Estresse': "Desenvolvi tÃ©cnicas eficazes de **{skill_name}**, mantendo a produtividade e clareza em [descrever brevemente o cenÃ¡rio/resultado].",
    'Multitarefa': "Excelente **{skill_name}** e capacidade de gerenciar eficientemente mÃºltiplos projetos e demandas simultaneamente em [descrever brevemente o cenÃ¡rio/resultado].",
    'Mentoria/Treinamento': "ExperiÃªncia em **{skill_name}** em guiar e desenvolver indivÃ­duos.",
    'ComunicaÃ§Ã£o Clara': "Forte **{skill_name}**, simplificando informaÃ§Ãµes complexas para diferentes pÃºblicos.",
    'ComunicaÃ§Ã£o Eficaz': "Habilidade em **{skill_name}**, transmitindo mensagens de forma clara e impactante.",
    'Adaptabilidade': "Alta **{skill_name}**, ajustando planos e estratÃ©gias rapidamente em resposta a mudanÃ§as inesperadas.",
    'GestÃ£o de Crises': "Capacidade comprovada em **{skill_name}**, atuando com calma e eficÃ¡cia para resolver problemas urgentes.",
    'Tomada de DecisÃ£o RÃ¡pida': "Proficiente em **{skill_name}**, avaliando situaÃ§Ãµes rapidamente para determinar o melhor curso de aÃ§Ã£o.",
    'LideranÃ§a/InfluÃªncia': "Demonstro **{skill_name}** e capacidade de influenciar positivamente o comportamento para alcanÃ§ar objetivos.",
    'PersuasÃ£o': "Habilidade em **{skill_name}**, utilizando comunicaÃ§Ã£o eficaz para alinhar perspectivas e alcanÃ§ar consensos.",
    'Gerenciamento': "Desenvolvi habilidades de **{skill_name}**, coordenando recursos e pessoas.",
    'ResoluÃ§Ã£o de Problemas': "Forte aptidÃ£o para **{skill_name}**, identificando desafios e implementando soluÃ§Ãµes eficazes.",
    'PaciÃªncia': "Alta **{skill_name}** e persistÃªncia em lidar com processos longos ou desafiadores.",
    'Empatia': "Cultivei **{skill_name}** e compreensÃ£o, criando conexÃµes e respondendo a necessidades emocionais."
}

def generate_professional_phrase(skill_name, scenario_text):
    template = skill_templates.get(skill_name, f"Desenvolvi habilidades de **{{skill_name}}** em contextos de alta demanda.")
    scenario_summary = scenario_text
    phrase = template.format(
        skill_name=skill_name,
        descrever=scenario_summary,
        cenÃ¡rio=scenario_summary
    )
    return phrase

def identify_skills_with_ai(scenario_description_text, ai_model):
    print("\nA Navegadora de Carreiras estÃ¡ pensando... (Consultando a IA para identificar habilidades)")
    prompt = f"""
A partir da seguinte descriÃ§Ã£o de uma experiÃªncia na maternidade, identifique as 3 a 7 habilidades profissionais mais relevantes que foram demonstradas.
Liste as habilidades identificadas como uma lista numerada no seguinte FORMATO (APENAS O NOME DA HABILIDADE):
1. Nome da Habilidade 1
2. Nome da Habilidade 2
3. Nome da Habilidade 3
...

Se a descriÃ§Ã£o nÃ£o permitir identificar habilidades profissionais claras, responda apenas "Nenhuma habilidade identificada".

DescriÃ§Ã£o da ExperiÃªncia:
"{scenario_description_text}"

Habilidades Identificadas:
"""
    identified_list = []
    try:
        response = ai_model.generate_content(prompt)
        ai_output = response.text
        print(f"(Resposta bruta da IA: {ai_output[:200]}...)")
        lines = ai_output.strip().split('\n')
        for line in lines:
            line = line.strip()
            if line and (line[0].isdigit() or line.startswith('-')):
                 parts = line.split('.', 1)
                 if len(parts) > 1:
                     skill_name = parts[1].strip()
                 else:
                     skill_name = line[1:].strip()
                 if skill_name and skill_name.lower() != "nenhuma habilidade identificada":
                     identified_list.append(skill_name)
        return set(identified_list)
    except Exception as e:
        print(f"Ocorreu um erro ao consultar a IA: {e}")
        print("Continuando sem a identificaÃ§Ã£o de habilidades pela IA.")
        return set()

print(welcome_message)

while not sair:
    if current_phase == 'welcome':
        print(focus_options)
        user_input = input().strip().lower()

        if user_input == 'sair':
            sair = True
        elif user_input in ['1', '2', '3', '4']:
            user_focus = user_input
            if user_focus == '1': print("\nOk, vamos focar em identificar habilidades para currÃ­culo/LinkedIn!")
            elif user_focus == '2': print("\nCerto, vamos pensar em como articular isso em entrevistas!")
            elif user_focus == '3': print("\nPerfeito, vamos focar em reconhecer o seu valor!")
            elif user_focus == '4': print("\nEntendido, vamos descobrir habilidades e depois pensamos na aplicaÃ§Ã£o.")
            current_phase = 'explore_scenarios'
        else:
            print("Desculpe, nÃ£o entendi. Por favor, digite o nÃºmero da sua escolha ou 'sair'.")

    elif current_phase == 'explore_scenarios':
        print("\n" + scenario_options)
        user_input = input().strip().lower()

        if user_input == 'sair':
            current_phase = 'next_steps'
        elif user_input in scenario_details:
            chosen_scenario = user_input
            print(f"\nÃ“tima escolha! Vamos explorar a situaÃ§Ã£o de: {scenario_details[chosen_scenario]['text']}.")
            user_scenario_description = {}
            current_phase = 'probe_scenario'
            question_index = 0
            print(scenario_details[chosen_scenario]['questions'][question_index])
            user_scenario_description['current_question_index'] = question_index
        else:
            print("Desculpe, nÃ£o entendi. Por favor, digite o nÃºmero do cenÃ¡rio ou 'sair'.")

    elif current_phase == 'probe_scenario':
        user_input = input().strip()
        question_index = user_scenario_description.get('current_question_index', 0)

        user_scenario_description[f'q{question_index + 1}'] = user_input

        question_index += 1

        if question_index < len(scenario_details[chosen_scenario]['questions']):
            user_scenario_description['current_question_index'] = question_index
            print(scenario_details[chosen_scenario]['questions'][question_index])
        else:
            print("\nEntendido! Obrigada por compartilhar essa experiÃªncia em detalhes.")
            full_description = " ".join([user_scenario_description.get(f'q{i+1}', '') for i in range(len(scenario_details[chosen_scenario]['questions']))])
            user_scenario_description['full_description'] = full_description
            current_phase = 'identify_skills'

    elif current_phase == 'identify_skills':
        full_description = user_scenario_description.get('full_description', '')

        if full_description:
            identified_skills_names = identify_skills_with_ai(full_description, model)

            if identified_skills_names:
                identified_skills = set()
                print("\nCom base na sua experiÃªncia, a IA identificou as seguintes habilidades profissionais:")
                for skill_name in identified_skills_names:
                    print(f"- **{skill_name}**")
                    identified_skills.add(skill_name)

                print("\nPercebe como essas 'habilidades de mÃ£e' sÃ£o valiosas no mercado de trabalho?")
            else:
                print("\nNÃ£o foi possÃ­vel identificar habilidades claras com a IA a partir da sua descriÃ§Ã£o. Sua experiÃªncia ainda Ã© vÃ¡lida!")
                identified_skills = set()

        else:
             print("\nNÃ£o recebi uma descriÃ§Ã£o completa para analisar. Pulando a identificaÃ§Ã£o de habilidades com IA.")
             identified_skills = set()


        current_phase = 'apply_skills'

    elif current_phase == 'apply_skills':
        scenario_text = scenario_details.get(chosen_scenario, {}).get('text', 'uma situaÃ§Ã£o pessoal')

        if identified_skills:
            print("\nAgora, vamos pensar em como vocÃª pode comunicar essas habilidades em um contexto profissional:")
            print("Aqui estÃ£o algumas sugestÃµes de frases que vocÃª pode adaptar para seu currÃ­culo ou LinkedIn:")

            for skill_name in identified_skills:
                 phrase = generate_professional_phrase(skill_name, scenario_text)
                 print(f"- {phrase}")

            if user_focus == '2':
                 print("\nPara entrevistas, prepare-se para contar a histÃ³ria completa da situaÃ§Ã£o que vocÃª descreveu (SituaÃ§Ã£o, AÃ§Ã£o, Resultado), focando nas habilidades profissionais que vocÃª usou.")

            print("\nLembre-se, estas sÃ£o sugestÃµes. Adapte-as para soarem naturais para vocÃª!")
        else:
            print("\nComo nÃ£o identificamos habilidades claras automaticamente, vamos tentar pensar juntas: Que habilidade vocÃª sente que mais usou nessa situaÃ§Ã£o? (Ex: paciÃªncia, criatividade, organizaÃ§Ã£o?) Sua experiÃªncia ainda Ã© um ponto forte!")

        current_phase = 'next_steps'

    elif current_phase == 'next_steps':
        print("\nVocÃª Ã© incrÃ­vel! Sua experiÃªncia como mÃ£e te equipou com competÃªncias valiosas que sÃ£o verdadeiros diferenciais na sua carreira.")

        print("\nO que vocÃª gostaria de fazer agora?")
        print("1. Explorar outra situaÃ§Ã£o da maternidade.")
        print("2. RecomeÃ§ar e ajustar meu foco (currÃ­culo, entrevista, etc.).")
        print("3. Encerrar a conversa por hoje.")
        user_input = input().strip().lower()

        if user_input == '1':
            current_phase = 'explore_scenarios'
            identified_skills = set()
            user_scenario_description = {}
            chosen_scenario = None
        elif user_input == '2':
            current_phase = 'welcome'
            identified_skills = set()
            user_scenario_description = {}
            chosen_scenario = None
            user_focus = None
        elif user_input == '3' or user_input == 'sair':
            sair = True
        else:
            print("Desculpe, nÃ£o entendi. Por favor, digite 1, 2 ou 3.")


if sair:
    print("\nFoi Ã³timo conversar com vocÃª! Lembre-se do seu valor e das suas habilidades. Quando precisar, a Navegadora de Carreiras e Maternidade estarÃ¡ aqui. ğŸ˜Š")