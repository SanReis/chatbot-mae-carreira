# -*- coding: utf-8 -*-
"""Projeto - ChatBot

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1yqvK_eghFheaXxdXKFdc3whwCfqRrZHQ
"""

import google.generativeai as genai
import os
!pip install google-generativeai -q

try:
    API_KEY = os.environ['GOOGLE_API_KEY']
    genai.configure(api_key=API_KEY)
    print("Chave API do Google configurada com sucesso usando Secrets.")
except KeyError:
    print("ERRO: Chave API do Google n√£o encontrada nos Secrets do Colab ('GOOGLE_API_KEY').")
    print("Por favor, configure sua chave API no painel 'Secrets' (√≠cone üîë) antes de rodar o chatbot.")
    sair = True
except Exception as e:
    print(f"ERRO inesperado ao configurar a API: {e}")
    sair = True

if 'sair' in locals() and sair:
    exit()

try:
    model = genai.GenerativeModel('gemini-2.5-flash-latest')
    print("Modelo Gemini 2.5 Flash carregado com sucesso.")
except Exception as e:
    print(f"ERRO ao carregar o modelo Gemini 2.5 Flash: {e}")
    print("Verifique se sua Chave API est√° correta e ativa e se o modelo est√° dispon√≠vel para voc√™.")
    exit()

current_phase = 'welcome'
sair = False
user_focus = None
chosen_scenario = None
user_scenario_description = {}
identified_skills = set()

welcome_message = """
Ol√°! Que bom te ver por aqui. Sou sua Navegadora de Carreiras e Maternidade.
Meu objetivo √© te ajudar a descobrir, reconhecer e comunicar o valor imenso das
habilidades que voc√™ desenvolveu cuidando dos seus filhos.
A maternidade nos ensina muito sobre gerenciar o caos, negociar sem parar e
liderar pelo exemplo! Vamos juntas explorar como tudo isso se aplica √† sua carreira?
"""

focus_options = """
Para come√ßar, pensando na sua jornada de carreira e maternidade, o que voc√™ mais gostaria de focar hoje?
1. Identificar habilidades para incluir no seu curr√≠culo/LinkedIn.
2. Preparar uma resposta para uma entrevista sobre sua pausa ou concilia√ß√£o.
3. Apenas reconhecer e valorizar o que voc√™ aprendeu.
4. Outro objetivo.
Por favor, digite o n√∫mero da sua escolha (ou 'sair' para encerrar):
"""

scenario_options = """
Vamos pensar em situa√ß√µes desafiadoras ou complexas que voc√™ enfrentou (ou enfrenta) no dia a dia com seus filhos.
Escolha uma √°rea que te pare√ßa interessante para explorar agora:
1. Gerenciar m√∫ltiplas tarefas ou pessoas ao mesmo tempo.
2. Resolver um conflito ou uma crise inesperada.
3. Planejar e organizar algo com muitos detalhes (uma viagem, uma festa, uma rotina).
4. Ensinar ou explicar algo complexo de forma simples e paciente.
5. Adaptar-se rapidamente a uma mudan√ßa de planos ou emerg√™ncia.
6. Motivar algu√©m (seu filho, parceiro/a, etc.) a fazer algo que n√£o queria.
7. Outra situa√ß√£o que voc√™ queira descrever.

Por favor, digite o n√∫mero da sua escolha (ou 'sair' para voltar ao foco):
"""

scenario_details = {
    '1': {
        'text': 'Gerenciar m√∫ltiplas tarefas ou pessoas ao mesmo tempo',
        'questions': [
            "Descreva a situa√ß√£o: Quais eram as diferentes 'tarefas' ou 'pessoas' que voc√™ estava conciliando? O que era o mais dif√≠cil?",
            "Como voc√™ decidiu o que fazer primeiro? Que 'ferramentas' ou 'estrat√©gias' voc√™ usou para lidar com tudo ao mesmo tempo? (Ex: fez listas, pediu ajuda, priorizou, aceitou imperfei√ß√£o?)",
            "Qual foi o 'resultado' dessa situa√ß√£o? O que voc√™ conseguiu completar ou alcan√ßar? O que voc√™ aprendeu sobre si mesma nesse processo?"
        ]
    },
     '2': {
        'text': 'Resolver um conflito ou uma crise inesperada',
        'questions': [
            "Descreva a situa√ß√£o do conflito/crise: Quem estava envolvido? Qual era o motivo principal da disputa ou o que causou a crise?",
            "Como voc√™ abordou a situa√ß√£o? Que perguntas voc√™ fez para entender o lado de cada um ou a raiz do problema? O que voc√™ fez ou disse?",
            "Que solu√ß√£o voc√™s (ou voc√™) encontraram? Qual foi o resultado da sua interven√ß√£o? O que voc√™ aprendeu sobre si nesse momento?"
        ]
    },
     '3': {
        'text': 'Planejar e organizar algo com muitos detalhes',
        'questions': [
            "Descreva o que voc√™ precisou planejar/organizar (ex: viagem, festa, rotina, mudan√ßa). Quais eram os principais desafios ou detalhes a considerar?",
            "Como voc√™ come√ßou a planejar? Que passos voc√™ seguiu? Que ferramentas (mentais ou f√≠sicas) usou para organizar (ex: planilhas, notas, aplicativos)?",
            "Qual foi o resultado desse planejamento/organiza√ß√£o? Tudo saiu como esperado? O que voc√™ faria diferente? Que habilidade de planejamento/organiza√ß√£o voc√™ sente que usou mais?"
        ]
    },
    '4': {
        'text': 'Ensinar ou explicar algo complexo de forma simples e paciente',
        'questions': [
            "O que voc√™ precisou ensinar ou explicar? Para quem? Qual era a principal dificuldade para a outra pessoa entender?",
            "Como voc√™ abordou o ensino/explica√ß√£o? Que linguagem usou? Deu exemplos pr√°ticos? Teve que repetir ou tentar de formas diferentes? Como lidou com a frustra√ß√£o ou falta de interesse da outra pessoa?",
            "A outra pessoa conseguiu entender ou aprender? Qual foi o resultado? O que voc√™ aprendeu sobre comunica√ß√£o ou paci√™ncia nesse processo?"
        ]
    },
     '5': {
        'text': 'Adaptar-se rapidamente a uma mudan√ßa de planos ou emerg√™ncia',
        'questions': [
            "Descreva a mudan√ßa de planos ou emerg√™ncia que aconteceu inesperadamente. Qual era o plano original ou a situa√ß√£o 'normal'?",
            "Como voc√™ reagiu inicialmente? Que passos voc√™ tomou para se adaptar ou lidar com a emerg√™ncia? Teve que pensar r√°pido?",
            "Qual foi o desfecho da situa√ß√£o? Voc√™ conseguiu resolver o problema ou ajustar os planos com sucesso? O que essa experi√™ncia te ensinou sobre sua capacidade de adapta√ß√£o ou resolu√ß√£o r√°pida?"
        ]
    },
     '6': {
        'text': 'Motivar algu√©m (seu filho, parceiro/a, etc.) a fazer algo que n√£o queria',
        'questions': [
            "Quem voc√™ precisou motivar e a fazer o qu√™? Por que essa pessoa estava relutante?",
            "Que abordagens voc√™ utilizou para convencer ou incentivar? Usou conversa, negocia√ß√£o, recompensa, explicou o 'porqu√™'? Como lidou com a resist√™ncia inicial?",
            "A pessoa acabou fazendo o que era necess√°rio? Qual foi o resultado da sua tentativa de motiva√ß√£o? O que voc√™ aprendeu sobre persuas√£o ou influ√™ncia nesse processo?"
        ]
    },
     '7': {
         'text': 'Outra situa√ß√£o que voc√™ queira descrever',
         'questions': [
             "Por favor, descreva brevemente a situa√ß√£o da maternidade que voc√™ quer explorar.",
             "Agora, pense em como voc√™ agiu nessa situa√ß√£o. Quais foram seus principais passos, decis√µes ou desafios?",
             "E qual foi o resultado? O que voc√™ conseguiu alcan√ßar e o que essa experi√™ncia te ensinou?"
         ]
     }
}

skill_templates = {
    'Organiza√ß√£o': "Demonstro forte capacidade de **{skill_name}** e coordena√ß√£o, gerenciando [descrever brevemente o cen√°rio/resultado].",
    'Planejamento Estrat√©gico': "Habilidade comprovada em **{skill_name}** para antecipar necessidades e planejar [descrever brevemente o cen√°rio/resultado].",
    'Gest√£o de Tarefas': "Eficaz em **{skill_name}**, organizando e acompanhando m√∫ltiplas responsabilidades para [descrever brevemente o cen√°rio/resultado].",
    'Prioriza√ß√£o': "Experi√™ncia em **{skill_name}**, focando recursos e esfor√ßos nas atividades mais cr√≠ticas em [descrever brevemente o cen√°rio/resultado].",
    'Resolu√ß√£o de Conflitos': "Proficiente em **{skill_name}** e media√ß√£o, facilitando acordos em [descrever brevemente o cen√°rio/resultado].",
    'Negocia√ß√£o': "Forte poder de **{skill_name}**, alcan√ßando resultados mutuamente ben√©ficos em [descrever brevemente o cen√°rio/resultado].",
    'Media√ß√£o': "Habilidade em **{skill_name}**, facilitando a comunica√ß√£o e o entendimento entre partes em [descrever brevemente o cen√°rio/resultado].",
    'Resili√™ncia': "Alta **{skill_name}** e capacidade de manter a calma e o foco sob press√£o em [descrever brevemente o cen√°rio/resultado].",
    'Gerenciamento de Estresse': "Desenvolvi t√©cnicas eficazes de **{skill_name}**, mantendo a produtividade e clareza em [descrever brevemente o cen√°rio/resultado].",
    'Multitarefa': "Excelente **{skill_name}** e capacidade de gerenciar eficientemente m√∫ltiplos projetos e demandas simultaneamente em [descrever brevemente o cen√°rio/resultado].",
    'Mentoria/Treinamento': "Experi√™ncia em **{skill_name}** em guiar e desenvolver indiv√≠duos.",
    'Comunica√ß√£o Clara': "Forte **{skill_name}**, simplificando informa√ß√µes complexas para diferentes p√∫blicos.",
    'Comunica√ß√£o Eficaz': "Habilidade em **{skill_name}**, transmitindo mensagens de forma clara e impactante.",
    'Adaptabilidade': "Alta **{skill_name}**, ajustando planos e estrat√©gias rapidamente em resposta a mudan√ßas inesperadas.",
    'Gest√£o de Crises': "Capacidade comprovada em **{skill_name}**, atuando com calma e efic√°cia para resolver problemas urgentes.",
    'Tomada de Decis√£o R√°pida': "Proficiente em **{skill_name}**, avaliando situa√ß√µes rapidamente para determinar o melhor curso de a√ß√£o.",
    'Lideran√ßa/Influ√™ncia': "Demonstro **{skill_name}** e capacidade de influenciar positivamente o comportamento para alcan√ßar objetivos.",
    'Persuas√£o': "Habilidade em **{skill_name}**, utilizando comunica√ß√£o eficaz para alinhar perspectivas e alcan√ßar consensos.",
    'Gerenciamento': "Desenvolvi habilidades de **{skill_name}**, coordenando recursos e pessoas.",
    'Resolu√ß√£o de Problemas': "Forte aptid√£o para **{skill_name}**, identificando desafios e implementando solu√ß√µes eficazes.",
    'Paci√™ncia': "Alta **{skill_name}** e persist√™ncia em lidar com processos longos ou desafiadores.",
    'Empatia': "Cultivei **{skill_name}** e compreens√£o, criando conex√µes e respondendo a necessidades emocionais."
}

def generate_professional_phrase(skill_name, scenario_text):
    template = skill_templates.get(skill_name, f"Desenvolvi habilidades de **{{skill_name}}** em contextos de alta demanda.")
    scenario_summary = scenario_text
    phrase = template.format(
        skill_name=skill_name,
        descrever=scenario_summary,
        cen√°rio=scenario_summary
    )
    return phrase

def identify_skills_with_ai(scenario_description_text, ai_model):
    print("\nA Navegadora de Carreiras est√° pensando... (Consultando a IA para identificar habilidades)")
    prompt = f"""
A partir da seguinte descri√ß√£o de uma experi√™ncia na maternidade, identifique as 3 a 7 habilidades profissionais mais relevantes que foram demonstradas.
Liste as habilidades identificadas como uma lista numerada no seguinte FORMATO (APENAS O NOME DA HABILIDADE):
1. Nome da Habilidade 1
2. Nome da Habilidade 2
3. Nome da Habilidade 3
...

Se a descri√ß√£o n√£o permitir identificar habilidades profissionais claras, responda apenas "Nenhuma habilidade identificada".

Descri√ß√£o da Experi√™ncia:
"{scenario_description_text}"

Habilidades Identificadas:
"""
    identified_list = []
    try:
        response = ai_model.generate_content(prompt)
        ai_output = response.text
        print(f"(Resposta bruta da IA: {ai_output[:200]}...)")
        lines = ai_output.strip().split('\n')
        for line in lines:
            line = line.strip()
            if line and (line[0].isdigit() or line.startswith('-')):
                 parts = line.split('.', 1)
                 if len(parts) > 1:
                     skill_name = parts[1].strip()
                 else:
                     skill_name = line[1:].strip()
                 if skill_name and skill_name.lower() != "nenhuma habilidade identificada":
                     identified_list.append(skill_name)
        return set(identified_list)
    except Exception as e:
        print(f"Ocorreu um erro ao consultar a IA: {e}")
        print("Continuando sem a identifica√ß√£o de habilidades pela IA.")
        return set()

print(welcome_message)

while not sair:
    if current_phase == 'welcome':
        print(focus_options)
        user_input = input().strip().lower()

        if user_input == 'sair':
            sair = True
        elif user_input in ['1', '2', '3', '4']:
            user_focus = user_input
            if user_focus == '1': print("\nOk, vamos focar em identificar habilidades para curr√≠culo/LinkedIn!")
            elif user_focus == '2': print("\nCerto, vamos pensar em como articular isso em entrevistas!")
            elif user_focus == '3': print("\nPerfeito, vamos focar em reconhecer o seu valor!")
            elif user_focus == '4': print("\nEntendido, vamos descobrir habilidades e depois pensamos na aplica√ß√£o.")
            current_phase = 'explore_scenarios'
        else:
            print("Desculpe, n√£o entendi. Por favor, digite o n√∫mero da sua escolha ou 'sair'.")

    elif current_phase == 'explore_scenarios':
        print("\n" + scenario_options)
        user_input = input().strip().lower()

        if user_input == 'sair':
            current_phase = 'next_steps'
        elif user_input in scenario_details:
            chosen_scenario = user_input
            print(f"\n√ìtima escolha! Vamos explorar a situa√ß√£o de: {scenario_details[chosen_scenario]['text']}.")
            user_scenario_description = {}
            current_phase = 'probe_scenario'
            question_index = 0
            print(scenario_details[chosen_scenario]['questions'][question_index])
            user_scenario_description['current_question_index'] = question_index
        else:
            print("Desculpe, n√£o entendi. Por favor, digite o n√∫mero do cen√°rio ou 'sair'.")

    elif current_phase == 'probe_scenario':
        user_input = input().strip()
        question_index = user_scenario_description.get('current_question_index', 0)

        user_scenario_description[f'q{question_index + 1}'] = user_input

        question_index += 1

        if question_index < len(scenario_details[chosen_scenario]['questions']):
            user_scenario_description['current_question_index'] = question_index
            print(scenario_details[chosen_scenario]['questions'][question_index])
        else:
            print("\nEntendido! Obrigada por compartilhar essa experi√™ncia em detalhes.")
            full_description = " ".join([user_scenario_description.get(f'q{i+1}', '') for i in range(len(scenario_details[chosen_scenario]['questions']))])
            user_scenario_description['full_description'] = full_description
            current_phase = 'identify_skills'

    elif current_phase == 'identify_skills':
        full_description = user_scenario_description.get('full_description', '')

        if full_description:
            identified_skills_names = identify_skills_with_ai(full_description, model)

            if identified_skills_names:
                identified_skills = set()
                print("\nCom base na sua experi√™ncia, a IA identificou as seguintes habilidades profissionais:")
                for skill_name in identified_skills_names:
                    print(f"- **{skill_name}**")
                    identified_skills.add(skill_name)

                print("\nPercebe como essas 'habilidades de m√£e' s√£o valiosas no mercado de trabalho?")
            else:
                print("\nN√£o foi poss√≠vel identificar habilidades claras com a IA a partir da sua descri√ß√£o. Sua experi√™ncia ainda √© v√°lida!")
                identified_skills = set()

        else:
             print("\nN√£o recebi uma descri√ß√£o completa para analisar. Pulando a identifica√ß√£o de habilidades com IA.")
             identified_skills = set()


        current_phase = 'apply_skills'

    elif current_phase == 'apply_skills':
        scenario_text = scenario_details.get(chosen_scenario, {}).get('text', 'uma situa√ß√£o pessoal')

        if identified_skills:
            print("\nAgora, vamos pensar em como voc√™ pode comunicar essas habilidades em um contexto profissional:")
            print("Aqui est√£o algumas sugest√µes de frases que voc√™ pode adaptar para seu curr√≠culo ou LinkedIn:")

            for skill_name in identified_skills:
                 phrase = generate_professional_phrase(skill_name, scenario_text)
                 print(f"- {phrase}")

            if user_focus == '2':
                 print("\nPara entrevistas, prepare-se para contar a hist√≥ria completa da situa√ß√£o que voc√™ descreveu (Situa√ß√£o, A√ß√£o, Resultado), focando nas habilidades profissionais que voc√™ usou.")

            print("\nLembre-se, estas s√£o sugest√µes. Adapte-as para soarem naturais para voc√™!")
        else:
            print("\nComo n√£o identificamos habilidades claras automaticamente, vamos tentar pensar juntas: Que habilidade voc√™ sente que mais usou nessa situa√ß√£o? (Ex: paci√™ncia, criatividade, organiza√ß√£o?) Sua experi√™ncia ainda √© um ponto forte!")

        current_phase = 'next_steps'

    elif current_phase == 'next_steps':
        print("\nVoc√™ √© incr√≠vel! Sua experi√™ncia como m√£e te equipou com compet√™ncias valiosas que s√£o verdadeiros diferenciais na sua carreira.")

        print("\nO que voc√™ gostaria de fazer agora?")
        print("1. Explorar outra situa√ß√£o da maternidade.")
        print("2. Recome√ßar e ajustar meu foco (curr√≠culo, entrevista, etc.).")
        print("3. Encerrar a conversa por hoje.")
        user_input = input().strip().lower()

        if user_input == '1':
            current_phase = 'explore_scenarios'
            identified_skills = set()
            user_scenario_description = {}
            chosen_scenario = None
        elif user_input == '2':
            current_phase = 'welcome'
            identified_skills = set()
            user_scenario_description = {}
            chosen_scenario = None
            user_focus = None
        elif user_input == '3' or user_input == 'sair':
            sair = True
        else:
            print("Desculpe, n√£o entendi. Por favor, digite 1, 2 ou 3.")


if sair:
    print("\nFoi √≥timo conversar com voc√™! Lembre-se do seu valor e das suas habilidades. Quando precisar, a Navegadora de Carreiras e Maternidade estar√° aqui. üòä")